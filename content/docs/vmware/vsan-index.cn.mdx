---
title: Overview
description: vSAN 概念
---

## 什么是 vSAN?

VMware vSAN 是作为 ESXi Hypervisor 的一部分本机运行的分布式软件层。
vSAN 可汇总主机集群的本地或直接连接容量设备，并创建在 vSAN 集群的所有主机之间共享的单个存储池。虽然 vSAN 支持 HA、vMotion 和 DRS 等需要共享存储的 VMware 功能，但它无需外部共享存储，并且简化了存储配置和虚拟机置备活动。

## vSAN 概念

VMware vSAN 使用软件定义的方法为虚拟机创建共享存储。

可以虚拟化 ESXi 主机的本地物理存储资源，并将这些资源转化为存储池，然后可根据虚拟机和应用程序的服务质量要求划分这些存储池并分配给这些虚拟机和应用程序。直接在 ESXi Hypervisor 中实现 vSAN。

可以配置 vSAN 以将其用作混合集群或全闪存集群。在混合集群中，闪存设备用于缓存层，磁盘用于存储容量层。在全闪存集群中，闪存设备同时用作缓存和容量设备。

您可以在现有主机集群上激活 vSAN，也可以在创建新集群时激活。vSAN 会将所有本地容量设备聚合到 vSAN 集群中所有主机共享的单个数据存储中。可通过向集群添加容量设备或具有容量设备的主机来扩展数据存储。集群中的所有 ESXi 主机在所有集群成员之间共享类似或相同的配置（包括类似或相同的存储配置）时，vSAN 的性能最佳。这种一致配置可在集群中的所有设备和主机之间均衡分配虚拟机存储组件。不具有任何本地设备的主机也可以加入 vSAN 数据存储并在 vSAN 数据存储中运行其虚拟机。

在 vSAN Original Storage Architecture (OSA) 中，向 vSAN 数据存储提供存储设备的每个主机必须至少提供一个闪存缓存设备和一个容量设备。此类主机上的设备将构成一个或多个磁盘组。每个磁盘组包含一个闪存缓存设备，以及一个或多个用于持久存储的容量设备。每个主机都可配置为使用多个磁盘组。

在 vSAN Express Storage Architecture (ESA) 中，vSAN 声明的所有存储设备都会提供容量并增强性能。vSAN 提供的每个主机的存储设备形成一个存储池。存储池表示主机提供给 vSAN 数据存储的缓存和容量量。

有关设计和优化 vSAN 集群的最佳做法、容量注意事项和常规建议，请参见《VMware vSAN 设计和优化指南》。

## vSAN 的特性

以下特性适用于 vSAN 及其集群和数据存储。

vSAN 包含许多功能，可增加数据计算和存储环境的弹性和效率。

### vSAN 功能

| 支持的功能                              | 描述                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| --------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 共享存储支持                            | vSAN 支持需要共享存储的 VMware 功能，如 HA、vMotion 和 DRS。例如，如果某个主机过载，DRS 可将虚拟机迁移到集群中的其他主机上。                                                                                                                                                                                                                                                                                                                            |
| 磁盘格式                                | vSAN 磁盘虚拟文件格式按 vSAN 集群提供高度可扩展的快照和克隆管理支持。有关每个 vSAN 集群支持的虚拟机快照和克隆数量的信息，请参阅 vSphere 最高配置 https://configmax.esp.vmware.com/home。                                                                                                                                                                                                                                                                |
| 全闪存和混合配置                        | 可以为全闪存或混合集群配置 vSAN。                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 故障域                                  | vSAN 支持配置故障域，当 vSAN 集群跨越数据中心的多个机架或刀片服务器机箱时，可以防止主机出现机架或机箱故障。                                                                                                                                                                                                                                                                                                                                             |
| 文件服务                                | 通过 vSAN 文件服务，您可以在 vSAN 数据存储中创建可供客户端工作站或虚拟机访问的文件共享。                                                                                                                                                                                                                                                                                                                                                                |
| iSCSI 目标服务                          | vSAN iSCSI 目标服务支持驻留在 vSAN 集群外部的主机和物理工作负载访问 vSAN 数据存储。                                                                                                                                                                                                                                                                                                                                                                     |
| vSAN 延伸集群和双节点 vSAN 集群         | vSAN 支持延伸集群，这类集群可以跨两个地理位置。                                                                                                                                                                                                                                                                                                                                                                                                         |
| 支持 Windows Server 故障切换集群 (WSFC) | vSAN 6.7 Update 3 及更高版本支持 Windows Server 故障切换集群 (WSFC) 所需的虚拟磁盘级 SCSI-3 持久预留 (SCSI3-PR)，以便在节点之间对共享磁盘的访问进行仲裁。支持 SCSI-3 PR 可确保在配置 WSFC 时使磁盘资源在 vSAN 数据存储上的本机虚拟机之间共享。当前支持以下配置：1.每个集群最多 6 个应用程序节点。2.每个节点最多 64 个共享虚拟磁盘。**Note**: 在 Microsoft Windows Server 2012 或更高版本上运行的 Microsoft SQL Server 2012 或更高版本已通过 vSAN 认证。 |
| vSAN Health Service                     | vSAN Health Service 包含一些预配置的运行状况检查测试，可以执行监控和故障排除并诊断集群组件出现问题的原因，还可以识别任何潜在的风险。                                                                                                                                                                                                                                                                                                                    |
| vSAN 性能服务                           | vSAN 性能服务包含用于监控 IOPS、吞吐量、延迟和拥堵的统计图表。可以监控 vSAN 集群、主机、磁盘组、磁盘和虚拟机的性能。                                                                                                                                                                                                                                                                                                                                    |
| 与 vSphere 存储功能集成                 | vSAN 与通常用于 VMFS 和 NFS 存储的 vSphere 数据管理功能相集成。这些功能包括快照、链接克隆和 vSphere Replication。                                                                                                                                                                                                                                                                                                                                       |
| 虚拟机存储策略                          | vSAN 与虚拟机存储策略结合使用，可支持以虚拟机为中心的存储管理方法。如果部署期间没有为虚拟机分配存储策略，则会自动将 vSAN 默认存储策略分配给虚拟机。                                                                                                                                                                                                                                                                                                     |
| 快速置备                                | 在创建和部署虚拟机期间，vSAN 可在 vCenter Server® 中快速置备存储。                                                                                                                                                                                                                                                                                                                                                                                      |
| 去重和压缩                              | vSAN 可执行块级去重和压缩以节省存储空间。在 vSAN 全闪存集群上启用去重和压缩后，每个磁盘组上的冗余数据都会减少。虽然去重和压缩是集群范围的设置，但这两项功能需要以磁盘组为单位应用。可按磁盘应用仅压缩 vSAN。                                                                                                                                                                                                                                            |
| 静态数据加密                            | vSAN 可提供静态数据加密。在对数据执行所有其他处理（例如，去重）后对数据加密。从集群中移除设备时，静态数据加密可保护存储设备上的数据。                                                                                                                                                                                                                                                                                                                   |
| 传输中数据加密                          | vSAN 可以对在集群中的主机之间传输的数据进行加密。启用传输数据加密后，vSAN 会对主机之间的所有数据和元数据流量进行加密。                                                                                                                                                                                                                                                                                                                                  |
| SDK 支持                                | VMware vSAN SDK 是 VMware vSphere Management SDK 的扩展。它包括有助于开发人员自动执行 vSAN 安装、配置、监控和故障排除工作的文档、库和代码示例。                                                                                                                                                                                                                                                                                                         |
